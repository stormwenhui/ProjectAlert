<hc:Window x:Class="ProjectAlert.WPF.Views.StatConfigEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        Title="统计配置"
        Height="600" Width="550"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 基本信息 -->
            <GroupBox Grid.Row="0" Header="基本信息" Margin="0,0,0,15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="名称" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="TxtName" Margin="0,5"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="系统分类" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="1" Grid.Column="1" x:Name="CmbCategory" Margin="0,5"/>
                </Grid>
            </GroupBox>

            <!-- 数据源 -->
            <GroupBox Grid.Row="1" Header="数据源配置" Margin="0,0,0,15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="数据源类型" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" x:Name="CmbSourceType" Margin="0,5" SelectionChanged="CmbSourceType_SelectionChanged"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="数据库连接" VerticalAlignment="Center" Margin="0,5" x:Name="LblDbConnection"/>
                    <ComboBox Grid.Row="1" Grid.Column="1" x:Name="CmbDbConnection" Margin="0,5" DisplayMemberPath="Name"/>
                </Grid>
            </GroupBox>

            <!-- SQL配置 -->
            <GroupBox Grid.Row="2" Header="SQL查询" Margin="0,0,0,15" x:Name="GrpSql">
                <TextBox x:Name="TxtSqlQuery" AcceptsReturn="True" TextWrapping="Wrap"
                         Height="80" VerticalScrollBarVisibility="Auto"/>
            </GroupBox>

            <!-- API配置 -->
            <GroupBox Grid.Row="3" Header="API配置" Margin="0,0,0,15" x:Name="GrpApi" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="API URL" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="TxtApiUrl" Margin="0,5"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="请求方法" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="1" Grid.Column="1" x:Name="CmbApiMethod" Margin="0,5">
                        <ComboBoxItem Content="GET"/>
                        <ComboBoxItem Content="POST"/>
                    </ComboBox>

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="请求头(JSON)" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="2" Grid.Column="1" x:Name="TxtApiHeaders" Margin="0,5" Height="40"
                             AcceptsReturn="True" TextWrapping="Wrap"/>

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="请求体" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="3" Grid.Column="1" x:Name="TxtApiBody" Margin="0,5" Height="40"
                             AcceptsReturn="True" TextWrapping="Wrap"/>

                    <TextBlock Grid.Row="4" Grid.Column="0" Text="超时(秒)" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="4" Grid.Column="1" x:Name="TxtApiTimeout" Margin="0,5" Width="80" HorizontalAlignment="Left"/>

                    <TextBlock Grid.Row="5" Grid.Column="0" Text="数据路径" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="5" Grid.Column="1" x:Name="TxtDataPath" Margin="0,5"/>
                </Grid>
            </GroupBox>

            <!-- 图表配置 -->
            <GroupBox Grid.Row="4" Header="图表配置" Margin="0,0,0,15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="图表类型" VerticalAlignment="Center" Margin="0,5"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" x:Name="CmbChartType" Margin="0,5"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="刷新间隔(秒)" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="1" Grid.Column="1" x:Name="TxtRefreshInterval" Margin="0,5" Width="80" HorizontalAlignment="Left"/>

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="排序" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="2" Grid.Column="1" x:Name="TxtSortOrder" Margin="0,5" Width="80" HorizontalAlignment="Left"/>
                </Grid>
            </GroupBox>

            <!-- 启用状态 -->
            <CheckBox Grid.Row="5" x:Name="ChkEnabled" Content="启用此配置" Margin="0,0,0,15"/>

            <!-- 按钮区域 -->
            <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="保存" Click="BtnSave_Click" Style="{StaticResource ButtonPrimary}"/>
                <Button Content="取消" Click="BtnCancel_Click" Margin="10,0,0,0" Style="{StaticResource ButtonDefault}"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</hc:Window>
